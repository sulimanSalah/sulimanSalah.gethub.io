<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>عرض الموظفين - شغلني</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap');
        body { font-family: 'Tajawal', sans-serif; background-color: #f5f7fa; }
        .employee-card { transition: all 0.3s ease; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05); border: 2px solid transparent; }
        .employee-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); border-color: #2563eb; }
        .badge-primary { background-color: #dbeafe; color: #1e40af; }
        .skill-tag { background-color: #eef2ff; color: #4338ca; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; margin: 0.125rem; }
        .work-thumbnail { width: 60px; height: 60px; object-fit: cover; border-radius: 8px; cursor: pointer; transition: transform 0.3s; }
        .work-thumbnail:hover { transform: scale(1.1); }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-2xl font-bold mb-6">عرض الموظفين</h1>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="employeeCardsContainer">
            <p class="text-gray-600 text-center col-span-full">جاري تحميل الموظفين...</p>
        </div>
    </div><script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebase/9.0.0/firebase-app.js";
    import { getFirestore, collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebase/9.0.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBsIaCjE7QOQ6QkhqhCIMA3sLdMvxBxPHk",
      authDomain: "shaglni-c64c0.firebaseapp.com",
      projectId: "shaglni-c64c0",
      storageBucket: "shaglni-c64c0.appspot.com",
      messagingSenderId: "768887356636",
      appId: "1:768887356636:web:11ec1d6991add3309c8819"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function fetchAndDisplayEmployees() {
        const container = document.getElementById('employeeCardsContainer');
        container.innerHTML = '';

        const q = query(collection(db, "employees"), orderBy("createdAt", "desc"));
        const querySnapshot = await getDocs(q);

        if (querySnapshot.empty) {
            container.innerHTML = '<p class="text-gray-600 text-center col-span-full">لا يوجد موظفون متاحون حالياً.</p>';
            return;
        }

        querySnapshot.forEach((doc) => {
            const data = doc.data();
            const card = document.createElement('div');
            card.className = "bg-white rounded-xl shadow-sm employee-card overflow-hidden p-6";
            card.innerHTML = `
                <div class="flex items-center space-x-4 rtl:space-x-reverse">
                    <img src="${data.profileImageUrl || 'https://via.placeholder.com/150'}" class="w-16 h-16 rounded-full border shadow">
                    <div>
                        <h3 class="font-bold text-lg">${data.fullName}</h3>
                        <p class="text-gray-600">${data.jobTitle}</p>
                    </div>
                </div>
                <div class="mt-4 text-sm text-gray-700">
                    <p><i class="fas fa-map-marker-alt ml-1"></i>${data.jobLocation}، السودان</p>
                    <p><i class="fas fa-briefcase ml-1"></i>${data.experienceYears} سنوات خبرة</p>
                </div>
                <div class="mt-2">
                    <h4 class="font-semibold text-sm">المهارات:</h4>
                    <div class="flex flex-wrap">
                        ${data.skills.map(skill => `<span class="skill-tag">${skill}</span>`).join('')}
                    </div>
                </div>
                <div class="mt-4">
                    <h4 class="font-semibold text-sm">أعمال سابقة:</h4>
                    <div class="flex flex-wrap gap-2">
                        ${data.previousWorksUrls.map(url => `<img src="${url}" class="work-thumbnail">`).join('')}
                    </div>
                </div>
                <div class="mt-4 text-sm">
                    <span class="text-gray-600">السعر:</span>
                    <span class="font-bold">${data.salaryFrom} - ${data.salaryTo} جنيه</span>
                </div>
            `;
            container.appendChild(card);
        });
    }

    document.addEventListener('DOMContentLoaded', fetchAndDisplayEmployees);
</script>

</body>
</html>