<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>إدخال الوظائف - شغلني</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebase/9.0.0/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebase/9.0.0/firebase-firestore.js";
    import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebase/9.0.0/firebase-storage.js";const firebaseConfig = {
  apiKey: "AIzaSyBsIaCjE7QOQ6QkhqhCIMA3sLdMvxBxPHk",
  authDomain: "shaglni-c64c0.firebaseapp.com",
  projectId: "shaglni-c64c0",
  storageBucket: "shaglni-c64c0.appspot.com",
  messagingSenderId: "768887356636",
  appId: "1:768887356636:web:11ec1d6991add3309c8819"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const storage = getStorage(app);

window.submitForm = async function () {
  const fullName = document.getElementById('fullName').value;
  const jobTitle = document.getElementById('jobTitle').value;
  const jobLocation = document.getElementById('jobLocation').value;
  const experienceYears = +document.getElementById('experienceYears').value;
  const salaryFrom = +document.getElementById('salaryFrom').value;
  const salaryTo = +document.getElementById('salaryTo').value;
  const skills = [1, 2, 3, 4, 5].map(i => document.getElementById(`skill${i}`).value);
  const profileImage = document.getElementById('profileImage').files[0];
  const previousWorks = document.getElementById('previousWorks').files;

  if (!profileImage || previousWorks.length === 0) {
    alert('يرجى رفع الصور المطلوبة.');
    return;
  }

  try {
    const profileRef = ref(storage, `profileImages/${Date.now()}_${profileImage.name}`);
    await uploadBytes(profileRef, profileImage);
    const profileImageUrl = await getDownloadURL(profileRef);

    const previousWorksUrls = [];
    for (const file of previousWorks) {
      const fileRef = ref(storage, `previousWorks/${Date.now()}_${file.name}`);
      await uploadBytes(fileRef, file);
      const url = await getDownloadURL(fileRef);
      previousWorksUrls.push(url);
    }

    await addDoc(collection(db, 'employees'), {
      fullName,
      jobTitle,
      jobLocation,
      experienceYears,
      salaryFrom,
      salaryTo,
      skills,
      profileImageUrl,
      previousWorksUrls,
      status: 'مُتاح',
      createdAt: serverTimestamp()
    });

    alert('تم حفظ الموظف بنجاح!');
    window.location.href = 'available_employees.html';
  } catch (error) {
    console.error('حدث خطأ:', error);
    alert('حدث خطأ أثناء حفظ البيانات.');
  }
}

  </script>
</head>
<body class="bg-gray-100">
  <div class="max-w-3xl mx-auto p-4 bg-white rounded-xl shadow mt-8">
    <h1 class="text-2xl font-bold mb-6 text-center">نموذج إدخال بيانات موظف</h1><div class="space-y-4">
  <input id="fullName" placeholder="الاسم الكامل" class="w-full p-2 border rounded" required>
  <input id="jobTitle" placeholder="الوظيفة" class="w-full p-2 border rounded" required>
  <input id="jobLocation" placeholder="الموقع" class="w-full p-2 border rounded" required>
  <input id="experienceYears" type="number" placeholder="سنوات الخبرة" class

