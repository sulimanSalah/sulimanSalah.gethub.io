<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>إدخال الوظائف - شغلني</title>
<style>
  body { font-family: Arial, sans-serif; background: #f5f7fa; margin: 0; padding: 20px; }
  .step-container { display: flex; justify-content: space-between; margin-bottom: 20px; max-width: 400px; margin: auto;}
  .step { width: 40px; height: 40px; border-radius: 50%; background: #2563eb; color: white; display: flex; justify-content: center; align-items: center; font-weight: bold;}
  .step.active { background: #10b981; }
  .form-step { max-width: 400px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 8px rgba(0,0,0,0.1); }
  .form-step.hidden { display: none; }
  label { display: block; margin: 12px 0 6px; }
  input[type=text], input[type=number], input[type=file] { width: 100%; padding: 8px; box-sizing: border-box; }
  button { padding: 10px 20px; margin: 10px 5px 0 0; border: none; border-radius: 5px; cursor: pointer;}
  .btn-next { background-color: #2563eb; color: white;}
  .btn-prev { background-color: #ccc; }
  .error { color: red; font-size: 0.9em; display: none; margin-top: 6px;}
</style>
</head>
<body>

<div class="step-container">
  <div class="step active" id="indicator1">1</div>
  <div class="step" id="indicator2">2</div>
  <div class="step" id="indicator3">3</div>
  <div class="step" id="indicator4">4</div>
  <div class="step" id="indicator5">5</div>
</div>

<form id="jobForm" enctype="multipart/form-data">
  <!-- خطوة 1 -->
  <div class="form-step" id="step1">
    <label for="profileImage">رفع صورة الملف الشخصي *</label>
    <input type="file" id="profileImage" accept="image/*" required />
    <label for="fullName">الاسم بالكامل *</label>
    <input type="text" id="fullName" required />
    <label for="jobTitle">الوظيفة *</label>
    <input type="text" id="jobTitle" required />
    <button type="button" class="btn-next" onclick="nextStep()">التالي</button>
  </div>

  <!-- خطوة 2 -->
  <div class="form-step hidden" id="step2">
    <label for="jobLocation">الموقع *</label>
    <input type="text" id="jobLocation" required />
    <label for="experienceYears">عدد سنوات الخبرة *</label>
    <input type="number" id="experienceYears" min="0" required />
    <button type="button" class="btn-prev" onclick="prevStep()">السابق</button>
    <button type="button" class="btn-next" onclick="nextStep()">التالي</button>
  </div>

  <!-- خطوة 3 -->
  <div class="form-step hidden" id="step3">
    <label>المهارات *</label>
    <input type="text" id="skill1" placeholder="المهارة 1" required />
    <input type="text" id="skill2" placeholder="المهارة 2" required />
    <input type="text" id="skill3" placeholder="المهارة 3" required />
    <input type="text" id="skill4" placeholder="المهارة 4" required />
    <input type="text" id="skill5" placeholder="المهارة 5" required />
    <button type="button" class="btn-prev" onclick="prevStep()">السابق</button>
    <button type="button" class="btn-next" onclick="nextStep()">التالي</button>
  </div>

  <!-- خطوة 4 -->
  <div class="form-step hidden" id="step4">
    <label for="previousWorks">رفع صور الأعمال السابقة *</label>
    <input type="file" id="previousWorks" multiple required />
    <button type="button" class="btn-prev" onclick="prevStep()">السابق</button>
    <button type="button" class="btn-next" onclick="nextStep()">التالي</button>
  </div>

  <!-- خطوة 5 -->
  <div class="form-step hidden" id="step5">
    <label for="salaryFrom">السعر من *</label>
    <input type="number" id="salaryFrom" min="0" required />
    <label for="salaryTo">السعر إلى *</label>
    <input type="number" id="salaryTo" min="0" required />
    <button type="button" class="btn-prev" onclick="prevStep()">السابق</button>
    <button type="submit" class="btn-next">إرسال</button>
  </div>
</form>

<script>
  const form = document.getElementById('jobForm');
  const steps = Array.from(document.querySelectorAll('.form-step'));
  const indicators = Array.from(document.querySelectorAll('.step'));
  let currentStep = 0;

  function updateStepsUI() {
    steps.forEach((step, i) => step.classList.toggle('hidden', i !== currentStep));
    indicators.forEach((ind, i) => ind.classList.toggle('active', i <= currentStep));
  }

  function validateCurrentStep() {
    const inputs = steps[currentStep].querySelectorAll('input[required]');
    for (let input of inputs) {
      if (input.type === 'file') {
        if (input.files.length === 0) {
          input.reportValidity();
          return false;
        }
      } else if (!input.value.trim()) {
        input.reportValidity();
        return false;
      }
    }
    return true;
  }

  function nextStep() {
    if (!validateCurrentStep()) return;
    if (currentStep < steps.length - 1) {
      currentStep++;
      updateStepsUI();
    }
  }

  function prevStep() {
    if (currentStep > 0) {
      currentStep--;
      updateStepsUI();
    }
  }

  form.addEventListener('submit', function(e) {
    e.preventDefault();
    if (!validateCurrentStep()) return;

    // هنا تضيف كود الإرسال إلى Firebase أو أي مكان آخر
    alert('تم إرسال النموذج بنجاح!');
    form.reset();
    currentStep = 0;
    updateStepsUI();
  });

  updateStepsUI();
</script>

</body>
</html>